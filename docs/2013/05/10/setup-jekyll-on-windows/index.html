<!DOCTYPE html> <!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"><![endif]--> <!--[if IE 7]><html class="no-js lt-ie9 lt-ie8"><![endif]--> <!--[if IE 8]><html class="no-js lt-ie9"><![endif]--> <!--[if gt IE 8]><!--> <html class="no-js" lang="cn"> <!--<![endif]--> <head> <meta charset="utf-8"> <!--[if IE]><meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'><![endif]--> <meta name="viewport" content="width=device-width,initial-scale=1"> <title>在 Windows 上安装 Jekyll 3 | Yi Zeng</title> <meta property="og:title" content="在 Windows 上安装 Jekyll 3"/> <meta name="author" content="Yi Zeng"/> <meta property="og:locale" content="cn"/> <meta name="description" content="如何在 Windows 上安装 Jekyll 3"/> <meta property="og:description" content="如何在 Windows 上安装 Jekyll 3"/> <link rel="canonical" href="http://cn.yizeng.me/2013/05/10/setup-jekyll-on-windows/"/> <meta property="og:url" content="http://cn.yizeng.me/2013/05/10/setup-jekyll-on-windows/"/> <meta property="og:site_name" content="Yi Zeng"/> <meta property="og:type" content="article"/> <meta property="article:published_time" content="2013-05-10T00:00:00+12:00"/> <script type="application/ld+json">
{"@context":"http://schema.org","@type":"BlogPosting","headline":"在 Windows 上安装 Jekyll 3","author":{"@type":"Person","name":"Yi Zeng"},"datePublished":"2013-05-10T00:00:00+12:00","dateModified":"2013-05-10T00:00:00+12:00","description":"如何在 Windows 上安装 Jekyll 3","mainEntityOfPage":{"@type":"WebPage","@id":"http://cn.yizeng.me/2013/05/10/setup-jekyll-on-windows/"},"url":"http://cn.yizeng.me/2013/05/10/setup-jekyll-on-windows/"}</script> <meta name="keywords" content="jekyll,ruby,windows"/> <link type="application/atom+xml" rel="alternate" href="http://cn.yizeng.me/feed.xml" title="Yi Zeng"/> <link href='/assets/stylesheets/blog.css' rel="stylesheet" type="text/css"> <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script> <script>window.Modernizr||document.write('<script src="/assets/javascripts/modernizr-2.8.3.min.js"><\/script>');</script> <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script> <script>window.jQuery||document.write('<script src="/assets/javascripts/jquery-3.2.1.min.js"><\/script>');</script> <script src="//cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/pace.min.js"></script> <script>window.Pace||document.write('<script src="/assets/javascripts/pace.min.js"><\/script>');</script> <script>(function(d,e,j,h,f,c,b){d.GoogleAnalyticsObject=f;d[f]=d[f]||function(){(d[f].q=d[f].q||[]).push(arguments)},d[f].l=1*new Date();c=e.createElement(j),b=e.getElementsByTagName(j)[0];c.async=1;c.src=h;b.parentNode.insertBefore(c,b)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga");ga("create","UA-42466615-2","auto");ga("send","pageview");</script> </head> <body> <!--[if IE]><p class="site-notice">您正在使用一个过时的网页浏览器。请<a href="http://browsehappy.com/" target="_blank">升级您的浏览器</a>或<a href="http://www.google.com/chromeframe/?redirect=true" target="_blank">开启 Google Chrome Frame</a> 来提高用户体验。</p><![endif]--> <noscript> <p class="site-notice">本网站需要 JavaScript。请查阅指南来<a href="http://www.enable-javascript.com/" target="_blank">给您的浏览器开启 JavaScript 功能</a>。</p> </noscript> <div class="nav-wrapper overlay-wrapper"> <div class="nav-form overlay-form"> <span class="overlay-header menu">菜单</span> <a class="btn-close">关闭</a> <div class="results"> <ul> <li><a href="/blog/categories/">文章分类</a></li> <li><a href="/blog/tags/">文章标签</a></li> <li><a href="/">关于</a></li> </ul> </div> </div> </div> <div class="search-wrapper overlay-wrapper"> <div class="search-form overlay-form"> <input type="text" class="overlay-header search-field" placeholder="搜索..."> <a class="btn-close">关闭</a> <ul class="results"></ul> </div> </div> <div id="page" class="hentry"> <header class="the-header"> <div class="unit-head"> <div class="unit-inner unit-head-inner"> <nav class="nav-global"> <ul> <li class="logo nav-link"> <button class="btn-menu" data-ga="Menu"></button> <a href="/blog/">Yi Zeng</a> <!--[if !IE]>--> <button class="btn-search" data-ga="Search"></button> <!--<![endif]--> </li> <li class="nav-link"><a data-ga="Categories" href="/blog/categories/">文章分类</a></li> <li class="nav-link"><a data-ga="Tags" href="/blog/tags/">文章标签</a></li> <!--[if !IE]>--> <li class="nav-link"><a data-ga="Search" class="btn-search" href="#">搜索</a></li> <!--<![endif]--> </ul> </nav> </div> </div> </header> <div class="body animated fadeInDown" role="main"> <div class="unit-body"> <div class="unit-inner unit-body-inner"> <div class="entry-content"> <article class="unit-article layout-post"> <div class="unit-inner unit-article-inner"> <div itemscope itemtype="http://schema.org/Article" class="content"> <header> <div class="unit-head"> <div class="unit-inner unit-head-inner"> <h1 class="entry-title" itemprop="name">在 Windows 上安装 Jekyll 3</h1> </div> </div> </header> <div class="bd article-content"> <div class="entry-content"> <div class="meta"> <p class="date-publish"> 发表信息: <time itemprop="datePublished" class="date-pub " title="2013-05-10T00:00:00+12:00" datetime="2013-05-10T00:00:00+12:00">May 10, 2013 </time> by <a class="author" href="/" rel="author"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Yi Zeng</span></span></a> <a class="license-icon" rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank"> <img alt="Creative Commons Licence" style="border-width:0" src="/assets/images/theme/cc-by-sa.png" height="16" width="80"/> </a> (最后更新于: <time class="date-updated updated" title="1970-01-01T12:33:37+12:00" datetime="1970-01-01T12:33:37+12:00">2017年1月7日</time>) </p> <ul class="list-category list-linear"> <li class="list-head">文章分类: </li> <li> <a class="internal" data-ga="笔记" href="/blog/categories/#笔记" title="笔记"> 笔记 <span>4</span></a> </li> </ul> <ul class="list-tag list-linear"> <li class="list-head">文章标签: </li> <li> <a class="internal" data-ga="jekyll" href="/blog/tags/#jekyll" title="jekyll">jekyll <span>3</span></a> </li> <li> <a class="internal" data-ga="ruby" href="/blog/tags/#ruby" title="ruby">ruby <span>4</span></a> </li> <li> <a class="internal" data-ga="windows" href="/blog/tags/#windows" title="windows">windows <span>2</span></a> </li> </ul> </div> <div itemprop="articleBody"> <blockquote> <p>若想查看原文，请点击<a href="http://yizeng.me/2013/05/10/install-jekyll-3-on-windows/">本链接</a>。</p> <p>最近更新于 - 2017年1月7日</p> </blockquote> <ul class="toc" id="markdown-toc"> <li><a href="#install-ruby" id="markdown-toc-install-ruby">安装 Ruby</a></li> <li><a href="#install-devkit" id="markdown-toc-install-devkit">安装 DevKit</a></li> <li><a href="#install-jekyll" id="markdown-toc-install-jekyll">安装 Jekyll</a></li> <li><a href="#start-jekyll" id="markdown-toc-start-jekyll">启动 Jekyll</a></li> <li><a href="#troubleshooting" id="markdown-toc-troubleshooting">故障诊断</a></li> </ul> <h2 id="install-ruby">安装 Ruby</h2> <ol> <li> <p>前往 <a href="http://rubyinstaller.org/downloads/">http://rubyinstaller.org/downloads/</a></p> </li> <li> <p>在 "RubyInstallers" 部分，选择某个版本点击下载。<br/> 例如，<code class="highlighter-rouge">Ruby 2.3.3-p222 (x64)</code> 是适于64位 Windows 机器上的 Ruby 2.3.3 x64 安装包。</p> </li> <li> <p>通过安装包安装</p> <ul> <li>最好保持默认的路径 <code class="highlighter-rouge">C:/Ruby23-x64</code>， 因为安装包明确提出 “请不要使用带有空格的文件夹 (如： Program Files)”。</li> <li>勾选 "Add Ruby executables to your PATH"，这样执行程序会被自动添加至 PATH 而避免不必要的头疼。</li> </ul> <p><a class="post-image" href="/assets/images/posts/2013-05-11-ruby-installer.png"> <img itemprop="image" data-src="/assets/images/posts/2013-05-11-ruby-installer.png" src="/assets/javascripts/unveil/loader.gif" alt="Windows Ruby 安装包"/> </a></p> </li> <li> <p>打开一个命令提示行并输入以下命令来检测 Ruby 是否成功安装。</p> <blockquote> <p>ruby -v</p> </blockquote> <p>输出示例：</p> <blockquote> <p>ruby 2.3.3p222 (2016-11-21 revision 56859) [x64-mingw32]</p> </blockquote> </li> </ol> <h2 id="install-devkit">安装 DevKit</h2> <p>DevKit 是一个在 Windows 上帮助简化安装及使用 Ruby C/C++ 扩展如 RDiscount 和 RedCloth 的工具箱。 详细的安装指南可以在程序的 <a href="https://github.com/oneclick/rubyinstaller/wiki/Development-Kit#installation-instructions">wiki 页面</a> 阅读。</p> <ol> <li> <p>再次前往 <a href="http://rubyinstaller.org/downloads/">http://rubyinstaller.org/downloads/</a></p> </li> <li> <p>下载同系统及 Ruby 版本相对应的 DevKit 安装包。 例如，DevKit-mingw64-64-4.7.2-20130224-1432-sfx.exe 适用于64位 Windows 系统上的 Ruby 2.3.3 x64。</p> <p>下面列出了如何选择正确的 DevKit 版本：</p> <blockquote> <p><strong>Ruby 1.8.6 to 1.9.3</strong>: DevKit tdm-32-4.5.2<br/> <strong>Ruby 2.0.0</strong>: DevKit mingw64-32-4.7.2<br/> <strong>Ruby 2.0.0 x64</strong>: DevKit mingw64-64-4.7.2</p> </blockquote> </li> <li> <p>运行安装包并解压缩至某文件夹，如 C:\DevKit</p> </li> <li> <p>通过初始化来创建 config.yml 文件。在 <code class="highlighter-rouge">C:\DevKit</code> 文件夹内打开命令行窗口，输入下列命令：</p> <blockquote> <p>ruby dk.rb init<br/> notepad config.yml</p> </blockquote> </li> <li> <p>在打开的记事本窗口中，于末尾添加新的一行 <code class="highlighter-rouge">- C:/Ruby23-x64</code>，保存文件并退出。</p> </li> <li> <p>回到命令行窗口内，审查（非必须）并安装。</p> <blockquote> <p>ruby dk.rb review<br/> ruby dk.rb install</p> </blockquote> </li> </ol> <h2 id="install-jekyll">安装 Jekyll</h2> <ol> <li> <p>确保 gem 已经正确安装</p> <blockquote> <p>gem -v</p> </blockquote> <p>输出示例：</p> <blockquote> <p>2.6.8</p> </blockquote> </li> <li> <p>安装 Jekyll 和 <a href="http://bundler.io/">Bundler</a> gems</p> <blockquote> <p>gem install jekyll bundler</p> </blockquote> </li> <li> <p>确保 jekyll gem 已经正确安装</p> <blockquote> <p>jekyll -v</p> </blockquote> <p>输出示例:</p> <blockquote> <p>jekyll 3.3.1</p> </blockquote> </li> <li> <p>确保 bundler gem 已经正确安装</p> <blockquote> <p>bundle -v</p> </blockquote> <p>输出示例:</p> <blockquote> <p>Bundler version 1.13.7</p> </blockquote> </li> </ol> <h2 id="start-jekyll">启动 Jekyll</h2> <p>按照官方的 <a href="http://jekyllrb.com/docs/quickstart/">Jekyll 快速开始手册</a> 的步骤， 一个新的 Jekyll 博客可以被建立并在 <a href="http://localhost:4000">localhost:4000</a>浏览。</p> <blockquote> <p>jekyll new myblog<br/> cd myblog<br/> bundle exec jekyll serve</p> </blockquote> <p><a class="post-image" href="/assets/images/posts/2013-05-11-new-jekyll-3-site.png"> <img itemprop="image" data-src="/assets/images/posts/2013-05-11-new-jekyll-3-site.png" src="/assets/javascripts/unveil/loader.gif" alt="New Jekyll 3 Site"/> </a></p> <h2 id="troubleshooting">故障诊断</h2> <ol> <li> <p>错误信息：</p> <div class="highlighter-rouge"><pre class="highlight"><code>"ruby" is not recognized as an internal or external command, operable program or batch file.
</code></pre> </div> <p><strong>可能原因</strong>： 该程序可能未被正确地安装或未在 PATH 里设置成功。</p> <p><strong>尝试解法</strong>： 确保程序已被正确安装。然后手动将其添加至 PATH，请参考如下步骤<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup>。</p> <blockquote> <ol> <li>按住 Win 键再按下 Pause</li> <li>点击 Advanced System Settings</li> <li>点击 Environment Variables</li> <li>将 <code class="highlighter-rouge">;C:\Ruby23-x64\bin</code> 添加至 Path 变量的末尾</li> <li>重启命令行</li> </ol> </blockquote> </li> <li> <p>错误信息：</p> <div class="highlighter-rouge"><pre class="highlight"><code>ERROR:  Error installing jekyll:
ERROR: Failed to build gem native extension.

"C:/Program Files/Ruby23-x64/bin/ruby.exe" extconf.rb

creating Makefile
make generating stemmer-x64-mingw32.def
compiling porter.c
...
make install
/usr/bin/install -c -m 0755 stemmer.so C:/Program Files/Ruby/Ruby200-x64/lib/ruby/gems/2.0.0/gems/fast-stemmer-1.0.2/li
/usr/bin/install: target `Files/Ruby/Ruby200-x64/lib/ruby/gems/2.0.0/gems/fast-stemmer-1.0.2/lib' is not a directory
make: *** [install-so] Error 1
</code></pre> </div> <p><strong>可能原因</strong>： Ruby 被安装在含有空格的路径里。</p> <p><strong>尝试解法</strong>： 重新安装 Ruby，这次请不要使用带有空格的路径，或者请直接选择使用默认路径。</p> </li> <li> <p>错误信息：</p> <div class="highlighter-rouge"><pre class="highlight"><code>New jekyll site installed in C:/Code/GitHub/blog.
 Dependency Error: Yikes! It looks like you don't have bundler or one of its dependencies installed. In order to use Jekyll as currently configured, you'll need to install this gem. The full error message from Ruby is: 'cannot load such file -- bundler' If you run into trouble, you can find helpful resources at http://jekyllrb.com/help/!
jekyll 3.3.1 | Error:  bundler
</code></pre> </div> <p><strong>可能原因</strong>: Bundler gem 未被正确安装.</p> <p><strong>尝试解法</strong>: 运行命令 <code class="highlighter-rouge">gem install bundler</code></p> </li> <li> <p>错误信息：</p> <div class="highlighter-rouge"><pre class="highlight"><code>Generating... Liquid Exception: No such file or directory - python c:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/pygments.rb-0.4.2/lib/pygments/mentos.py in 2013-04-22-yizeng-hello-world.md
</code></pre> </div> <p><strong>可能原因</strong>： 如果你正在使用 Jekyll 2 和 Pygments， 这个错误很可能意味着 Pygments 未能被正确安装或是 PATH 设置尚未生效。</p> <p><strong>尝试解法</strong>： 首先请确保 Pygments 已成功安装且 Python 的 PATH 设置正确未包含空格和最后多余的斜杠。 然后重启命令行。如果依旧失败，请尝试注销并重新登录 Windows。 甚至使用终极解法，重启电脑。</p> </li> <li> <p>错误信息：</p> <div class="highlighter-rouge"><pre class="highlight"><code>Generating... Liquid Exception: No such file or directory - /bin/sh in _posts/2013-04-22-yizeng-hello-world.md
</code></pre> </div> <p><strong>可能原因</strong>： 与 pygments.rb 0.5.1/0.5.2 版本的兼容性问题。</p> <p><strong>尝试解法</strong>： 将 pygments.rb gem 的版本从 0.5.1/0.5.2 降至 0.5.0。</p> <blockquote> <p>gem uninstall pygments.rb --version '=0.5.2'<br/> gem install pygments.rb --version 0.5.0</p> </blockquote> </li> <li> <p>错误信息：</p> <div class="highlighter-rouge"><pre class="highlight"><code>c:/Ruby200-x64/lib/ruby/2.0.0/rubygems/dependency.rb:296:in `to_specs': Could not find 'pygments.rb' (~&gt; 0.4.2) - did find: [pygments.rb-0.5.0] (Gem::LoadError)
from c:/Ruby200-x64/lib/ruby/2.0.0/rubygems/specification.rb:1196:in `block in activate_dependencies'
from c:/Ruby200-x64/lib/ruby/2.0.0/rubygems/specification.rb:1185:in `each'
from c:/Ruby200-x64/lib/ruby/2.0.0/rubygems/specification.rb:1185:in `activate_dependencies'
from c:/Ruby200-x64/lib/ruby/2.0.0/rubygems/specification.rb:1167:in `activate'
from c:/Ruby200-x64/lib/ruby/2.0.0/rubygems/core_ext/kernel_gem.rb:48:in`gem'
from c:/Ruby200-x64/bin/jekyll:22:in `&lt;main&gt;'`
</code></pre> </div> <p><strong>可能原因</strong>：如错误信息所述，找不到 pygments.rb 0.4.2，仅找到 pygments.rb 0.5.0。 （此问题出现于此文初稿时的 Jekyll 版本，现版本应已修复）</p> <p><strong>尝试解法</strong>： 将 pygments.rb gem 的版本降级至 0.4.2</p> <blockquote> <p>gem uninstall pygments.rb --version “=0.5.0”<br/> gem install pygments.rb --version “=0.4.2”</p> </blockquote> </li> <li> <p>错误信息：</p> <div class="highlighter-rouge"><pre class="highlight"><code>Generating... You are missing a library required for Markdown. Please run:
$ [sudo] gem install rdiscount
Conversion error: There was an error converting '_posts/2013-04-22-yizeng-hello-world.md/#excerpt'.

ERROR: YOUR SITE COULD NOT BE BUILT:
   ------------------------------------
   Missing dependency: rdiscount
</code></pre> </div> <p><strong>可能原因</strong>： 如果你还是在使用 Jekyll 2, 这个错误很可能是因为依赖包 <code class="highlighter-rouge">rdiscount</code> 未找到。 此问题最有可能的原因是，网站使用的是 <a href="https://github.com/davidfstr/RDiscount">rdiscount</a> 作为 Markdown 引擎，而不是 Jekyll 默认的引擎，故需要手动自行安装。</p> <p><strong>尝试解法</strong>：运行 <code class="highlighter-rouge">gem install rdiscount</code></p> </li> <li> <p>错误信息：</p> <div class="highlighter-rouge"><pre class="highlight"><code>c:/Ruby200-x64/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:55:in `require': cannot load such file -- wdm (LoadError)
from c:/Ruby200-x64/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:55:in `require'
from c:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/listen-1.3.1/lib/listen/adapter.rb:207:in `load_dependent_adapter'
from c:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/listen-1.3.1/lib/listen/adapters/windows.rb:33:in `load_dependent_a
dapter'
...
</code></pre> </div> <p><strong>可能原因</strong>： <code class="highlighter-rouge">wdm</code> gem 未被安装。因为 Jekyll 只官方地支持 *nix 系统，所以 <a href="https://github.com/Maher4Ever/wdm">Windows Directory Monitor</a> 并没有作为依赖包而被自动安装。</p> <p><strong>尝试解法</strong>：将 <code class="highlighter-rouge">gem 'wdm', '&gt;= 0.1.0' if Gem.win_platform?</code> 加入 <code class="highlighter-rouge">Gemfile</code> 文件，然后再次运行 <code class="highlighter-rouge">bundle install</code>.</p> </li> </ol> <div class="footnotes"> <ol> <li id="fn:1"> <p><a href="http://stackoverflow.com/a/6318188/1177636">在 Windows 7 上添加 Python Path</a> by melhosseiny.&nbsp;<a href="#fnref:1" class="reversefootnote">&#8617;</a></p> </li> </ol> </div> </div> </div> </div> <footer class="unit-foot"> <div class="unit-inner unit-foot-inner"> <div class="gotop"> <a class="internal" href="#page">返回顶部</a> </div> <nav class="pagination"> <a class="internal" data-ga="Next Post" rel="next" href="/2013/05/17/quick-rubygems-command-references-for-jekyll/" title="查阅 'Jekyll 使用过程中的一些常用的 RubyGems 命令'">Jekyll 使用过程中的一些常用的 RubyGems 命令 → </a> </nav> </div> </footer> <div class="misc-content"> <script>$(document).ready(function(){var b="ULZ0b9TFdfCUJSKQd4WCKv2v3u25YoG7YG8zXPewkWrT35lZ0Se9YnxLzoV6VM8W";var c="yizeng-cn";var a="link:"+$(".comments .show-hidden").attr("data-disqus-url");$.ajax({type:"GET",url:"https://disqus.com/api/3.0/threads/set.jsonp",data:{api_key:b,forum:c,thread:a},cache:false,dataType:"jsonp",success:function(d){if(d.response.length===1){btnText="显示评论 ("+d.response[0].posts+")";$(".comments .show-hidden").html(btnText)}}});$(".comments .show-hidden").on("click",function(){$.ajaxSetup({cache:true});$.getScript("http://"+c+".disqus.com/embed.js");$.ajaxSetup({cache:false});$(this).remove()});if(/\#comments/.test(location.hash)){$(".comments .show-hidden").trigger("click")}});</script> <div class="comments"> <button class="center-block show-hidden" data-ga="Show Comments" data-disqus-url="http://cn.yizeng.me/2013/05/10/setup-jekyll-on-windows/">显示评论</button> <div id="disqus_thread"></div> </div> </div> </div> </div> </article> </div> </div> </div> </div> <footer class="the-footer"> <div class="unit-foot"> <div class="unit-inner unit-foot-inner"> <div class="misc vcard"> <div class="about"> <h4><a href="/">关于</a></h4> <p>本博客译自 <a href="http://yizeng.me/blog" target="_blank">yizeng.me/blog</a></p> <p><small>本博客主题 <a class="external" href="https://github.com/yizeng/jekyll-theme-simple-texture" target="_blank">Simple Texture</a> 由 <a class="external" href="http://yizeng.me" target="_blank">Yi Zeng</a> 基于 <a class="external" href="https://jekyllrb.com/" target="_blank">Jekyll</a> 开发.</small></p> </div> <div class="social-links"> <a class="external ico-gmail" href="mailto:yi.zeng.dev@gmail.com" rel="me" target="_blank" title="email"></a> <a class="external ico-rss" href="/feed.xml" rel="me" target="_blank" title="feed"></a> <a class="external ico-github" href="https://github.com/yizeng/" rel="me" target="_blank" title="github"></a> <a class="external ico-instagram" href="https://www.instagram.com/yizeng.me" rel="me" target="_blank" title="instagram"></a> <a class="external ico-linkedin" href="https://www.linkedin.com/in/yizengnz/" rel="me" target="_blank" title="linkedin"></a> <a class="external ico-stackoverflow" href="https://stackoverflow.com/users/1177636/yi-zeng" rel="me" target="_blank" title="stackoverflow"></a> <a class="external ico-vk" href="https://vk.com/yi.zeng" rel="me" target="_blank" title="vk"></a> </div> </div> </div> </div> <a href="#" class="internal back-to-top">返回顶部</a> </footer> </div> <script>$(document).ready(function(){var c=50,b=500,a=960;$(window).scroll(function(){if($(window).width()>a){if($(this).scrollTop()>c){$("footer").css("top","20px");$("footer .back-to-top").fadeIn(b)}else{$("footer").css("top","auto");$("footer .back-to-top").fadeOut(b)}}});$(window).resize(function(){if($(window).width()<a){$("footer").css("top","auto");$("footer .back-to-top").fadeOut(b)}if($(window).width()>=a&&$(this).scrollTop()>c){$("footer").css("top","20px");$("footer .back-to-top").fadeIn(b)}});$("footer .back-to-top, .gotop a").on("click",function(d){d.preventDefault();$("html, body").animate({scrollTop:0},b);return false});$(".show-hidden").on("click",function(){$(this).parent().next().toggleClass("hidden");$(this).toggleClass("hidden")})});</script> <script>$(document).ready(function(){function b(d,e,c){if(typeof c==="undefined"){ga("send",{hitType:"event",eventCategory:d,eventAction:e})}else{ga("send",{hitType:"event",eventCategory:d,eventAction:e,eventLabel:c.trim()})}}function a(c){ga("send","event",{eventCategory:"Outbound Link",eventAction:"Click",eventLabel:c.trim(),transport:"beacon"})}$(".external").on("click",function(){a($(this).attr("href"))});$(".the-header .nav-link a, [class$=wrapper] .results a").on("click",function(){b("Blog","Navigate",this.textContent)});$(".the-header .nav-link button").on("click",function(){b("Blog","Navigate",this.getAttribute("data-ga"))});$(".the-footer .about h4 a").on("click",function(){b("Blog","Go to About")});$(".tag_box.categories a").on("click",function(){b("Blog","Click Category",this.title)});$(".tag_box.tags a").on("click",function(){b("Blog","Click Tag",this.title)});$(".unit-article .comments .show-hidden").on("click",function(){b("Post","Show Comments",this.textContent)});$("a.internal").on("click",function(){label=(this.getAttribute("data-ga")!==null)?this.getAttribute("data-ga"):this.textContent;b("Post","Navigate",label)});$(".unit-article .meta .author").on("click",function(){b("Post","Show Author")});$(".unit-article .meta .license").on("click",function(){b("Post","Show License")});$(".unit-article .meta .list-tag a").on("click",function(){if(this.getAttribute("data-ga")!==null){b("Post","Click Tag",this.getAttribute("data-ga"))}});$(".unit-article .meta .list-category a").on("click",function(){if(this.getAttribute("data-ga")!==null){b("Post","Click Category",this.getAttribute("data-ga"))}});$(".addthis_toolbox .btn-share-post").on("click",function(){b("Post","Share Post",this.attr("title"))})});</script> <script src="/assets/javascripts/jekyll-search.jquery.js"></script> <script>$(document).ready(function(){$(".search-field").simpleJekyllSearch({jsonFile:"/search.json",template:'<li><a href="{url}">{title} <span class="entry-date"><time datetime="{date}">{shortdate}</time></span></a></li>',searchResults:".search-wrapper .results",searchResultsTitle:"<h4>搜索结果</h4>",noResults:"<p>啊哈<br/><small>什么也没找到 :(</small></p>"})});(function(c,b,d){var a=function(){c(".nav-wrapper, .search-wrapper").removeAttr("style");c(".nav-form, .search-form").removeClass("active");c("body").removeClass("nav-overlay search-overlay")};c(".nav-global .btn-search").on("click",function(){c(".search-wrapper").css({display:"block"});c(".search-form").addClass("active");c(".search-form").find("input").focus();c("body").addClass("search-overlay")});c(".nav-global .btn-menu").on("click",function(){c(".nav-wrapper").css({display:"block"});c(".nav-form").addClass("active");c(".nav-form .search-field").prop("disabled",true);c("body").addClass("nav-overlay")});c(".nav-wrapper .btn-close, .search-wrapper .btn-close").on("click",function(){a()});c(document).on("keyup",function(f){if(f.keyCode===27){a()}})})(jQuery,window);</script> <script src='//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.js'></script> <script src='//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-buttons.min.js'></script> <script src="/assets/javascripts/unveil/jquery.unveil.min.js"></script> <script>window.jQuery.fancybox||document.write('<script src="/assets/javascripts/fancybox/jquery.fancybox.pack.js?v=2.1.4"><\/script>');window.jQuery.fancybox.helpers.buttons||document.write('<script src="/assets/javascripts/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"><\/script>');</script> <script>$("head").append('<link rel="stylesheet" href="/assets/javascripts/fancybox/jquery.fancybox.css?v=2.1.4" type="text/css" />');$("head").append('<link rel="stylesheet" href="/assets/javascripts/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" />');$(".post-image").fancybox({prevEffect:"none",nextEffect:"none",closeBtn:true,helpers:{title:{type:"float"}}});$(document).ready(function(){$(".post-image > img").unveil(450)});</script> </body> </html>